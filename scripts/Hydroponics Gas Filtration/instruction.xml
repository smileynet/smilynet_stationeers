<?xml version="1.0" encoding="utf-8"?>
<InstructionData xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <DateTime>133814293327457532</DateTime>
  <GameVersion>0.2.5370.24111</GameVersion>
  <Title>Hydroponics Gas Filtration</Title>
  <Description>For filtration unit to inject CO2 &amp; Nitrogenâ€‹</Description>
  <Author>SMiLeY.NET</Author>
  <WorkshopFileHandle>0</WorkshopFileHandle>
  <Instructions>### Hydroponics Filtration Handler ###
alias Self db
alias GasSensor d0

alias CurrentCO2Amount r0
alias CurrentNitrogenAmount r1
alias NeedGas r2
# TODO: Implement filter checking


define MinC02Ratio 0.05
define MinNitrogenRatio 0.05
define Idle 0
define Active 1
define PercentageMode 1

define SmallLEDHash HASH("StructureConsoleLED5")
define CO2LED HASH("LED - CO2")
define NitrogenLED HASH("LED - Nitrogen")

Reset:
s Self Mode Idle
sbn SmallLEDHash CO2LED  Mode PercentageMode
sbn SmallLEDHash CO2LED  Color Color.Gray
sbn SmallLEDHash NitrogenLED  Mode PercentageMode
sbn SmallLEDHash NitrogenLED  Color Color.Green
j Main

Main:
yield
move NeedGas 0
l CurrentCO2Amount GasSensor RatioCarbonDioxide
sbn SmallLEDHash CO2LED  Setting CurrentCO2Amount
l CurrentNitrogenAmount GasSensor RatioNitrogen
sbn SmallLEDHash NitrogenLED  Setting CurrentNitrogenAmount
slt NeedGas CurrentCO2Amount MinC02Ratio
slt NeedGas CurrentNitrogenAmount MinNitrogenRatio
bgtz NeedGas DoFiltration
j Reset

DoFiltration:
s Self Mode Active
j Main</Instructions>
</InstructionData>